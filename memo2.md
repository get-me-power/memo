# Bramさん

## 今はコマンドよりプラグインの方が重要視される時代

## viについて

メモリがしょぼかったからswpファイルが必要

マッピングが滅茶重宝した

ステートマシンであること

迷路探索ができた

## viでできないこと

一つのウインドウ、一つのバッファ

補完できない

その他色々

要求した人がいなかったため


## Autocommands

今でも使われてる

フックを定義して、あるときにトリガされる

どんなコマンドでも実行できる

なんでもできることが問題だった

ポインタをバッファにおいたまま

アクセスバグが起こる場合があった

バグ修正中

## Vim5.0からVimスクリプトが導入された

はじめにsyntaxのハイライトにつかわれた

OSによって書き方が違った

## Vim6.0からプラグインが導入された

適切なディレクトリにコードを設置するとVim起動時にVimが読み込み

プラグインマネージャーは当初なかった

様々なフィーチャーが追加された

Pythonからヒントを得た

vimスクリプトに不動小数点

プラグインをたくさん書くと、パフォーマンスに影響が出てくる

### :profileコマンド

プラグインの実行時間などを見るコマンド

プラグインライター必須のコマンド

全ては高速化のため

プラグインを読み込む時間

プラグインを実行する時間

この２つを考慮

解決策: 高スペックマシンを買えばいいじゃん

本質的でない

条件分岐でプラグインを必要なときだけ起動するようにする

## パーシング

仕事のどこで時間を食っているのかを見ること

なかなか難しい

profileを見ような

メインスレッドをスローダウンさせない

## プラグインのパフォーマンスが遅い

vimスクリプトではなく他の言語で置換すればいいじゃん

- Python

- Perl

- Ruby

- Lua

など

vimスクリプトだけではなくほかの言語の学習コストがかかる

多言語の環境構築が必要になってくることがある

## Vimスクリプトの高速化

関数が実行されたときのパーシング

インタミレッドフォームにする

実行回数自体を減らす

コンパイルされたプラグインにする

コンパイル？？？

単にひとつのテキストにしてわかってるところをパースする

## プラグインの導入

ファイル上書き大変

アップデート大変

:packaddを追加

ディレクトリを統一

手作業をする必要がなくなる

$ git pull onlyでプラグインのアップデートができるようになる

どうしても手作業が残る

## 多くのプラグインマネージャーがある

- neobundol

- vim-plug

- dein.vimなど

今の所どうしてもGitHubに依存している

## Solution

独立性を宣言

dependencies.vim

宣言とロードを分ける

vimscliptの高速化

luaにコンパイルを考えているとか

ポップアップウインドウがほしい！！
